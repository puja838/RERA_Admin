<div class="main-body">
  <div class="promot_regs">
    <div class="container">
      <div class="prom_reg_in">
        <h3>Annual Report</h3>
      </div>
      <app-dashboard-header [linkName]="'Annual Report'"></app-dashboard-header>
      <div class="prom_reg_in">
        <mat-tab-group dynamicHeight [(selectedIndex)]="selectedTabIndex" (selectedTabChange)="onTabChange($event)">
          <mat-tab label="Upload Annual Report">

          <div class="row" *ngFor="let arr of annualReport, let i = index;">

            <div class="col-sm-3 mt-2">

              <label class="ng-star-inserted">Select Financial Year <span style="color: #f00;" class="ng-star-inserted">*</span></label>

              <select class="form-control" [(ngModel)]="arr.financial_report_year" [disabled]="annualReport.length>1">
                <option value="">Select</option>
                <option *ngFor="let data of this.selectYearOption" value="{{data.value}}">{{data.name}}
                </option>
                </select>
            </div>

          <!-- </div>

          <div class="row mt-2"> -->

            <div class="col-sm-3 mt-2">

              <label class="ng-star-inserted">Subject of Document <span style="color: #f00;" class="ng-star-inserted">*</span></label>

              <select class="form-control" [(ngModel)]="arr.sub_doc" (change)="documentChangeFun($event, i,arr)">
                <option value="">Select</option>
                <option *ngFor="let data of this.selectDocumentOption" value="{{data.value}}">{{data.name}}
                </option>
                </select>
            </div>

          <!-- </div>

          <div class="row mt-2"> -->

            <div class="col-sm-3 mt-2" *ngIf="arr.showDiv">

              <label class="ng-star-inserted">Document Type <span style="color: #f00;" class="ng-star-inserted">*</span></label>

              <input type="text" class="form-control" [(ngModel)]="arr.oth_doc">
            </div>



            <div class="col-sm-3 mt-2">

              <label class="ng-star-inserted">Upload Report <span style="color: #f00;" class="ng-star-inserted">* (Only PDF File)</span></label>

              

              <input type="file" id="fileUp" accept="application/pdf" class="form-control" [(ngModel)]="arr.file_name" (change)="uploadAnnual_report($event, arr)">
  

            </div>

            <div class="form-group button_dv mb-2 mr-2 button-action-group" [hidden]="annualReport.length==1">
              <i class="fa fa-trash mt-4 mx-3" style="font-size:28px;color:red; cursor: pointer;" (click)="closeSubmit(i)"></i>
      
            </div>

          </div>

          



          <div class="form-group button_dv mb-2 mr-2 button-action-group">
            <button class="btn btn-primary" (click)="addMoreFun()"><i class="fa fa-plus-square-o"></i> Add More</button>
            <button class="btn btn-success ng-star-inserted" (click)="onSubmit()"> Submit </button>
          </div>
            

          <table width="100%" border="0" cellspacing="0" cellpadding="0" class="table table-striped table-bordered table-hover mt-5">
          
            <tbody>
              
            <tr class="ng-star-inserted">
            
              <td align="left" valign="middle" class="ng-star-inserted" style="width: 10%;">
                <label ng-reflect-ng-class="table-heading-lbl" class="table-heading-lbl ng-star-inserted">Seq No.</label>
              </td>
  
              <td align="left" valign="middle" class="ng-star-inserted">
                <label ng-reflect-ng-class="table-heading-lbl" class="table-heading-lbl ng-star-inserted">Financial Year</label>
              </td>
  
              <td align="left" valign="middle" class="ng-star-inserted">
                <label ng-reflect-ng-class="table-heading-lbl" class="table-heading-lbl ng-star-inserted">Subject of Document</label>
              </td>
              
  
              <td align="left" valign="middle" class="ng-star-inserted">
                <label ng-reflect-ng-class="table-heading-lbl" class="table-heading-lbl ng-star-inserted">Action</label>
              </td>
          </tr>
  
          <tr class="ng-star-inserted" *ngFor="let data of this.listArray | paginate: { itemsPerPage: 5, currentPage: p }, let i = index">
            
            <td align="left" valign="middle" class="ng-star-inserted">
              {{i+1}}
            </td>
  
            <td align="left" valign="middle" class="ng-star-inserted">
              {{data.financial_report_year}}
            </td>
  
            <td align="left" valign="middle" class="ng-star-inserted">
            {{data.sub_doc}}
            </td>
              
          <td align="left" valign="middle" class="ng-star-inserted">
            <i class="fa fa-eye" (click)="goToLink(data.file_name)"></i> 
            
            <i class="fa fa-trash mx-4"  (click)="openDeleteModal(deleteModal, data.reportId, i)"></i>
          </td>
          </tr>
          
          
        </tbody>
      </table>
      <pagination-controls (pageChange)="p = $event"></pagination-controls>

          </mat-tab>
        </mat-tab-group>

        
      </div>
    </div>
  </div>
</div>

<ng-template #deleteModal>
  <div class="modal-confirm">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" (click)="closeModal()">X</button>
    </div>
      <div class="modal-body">
        <p>Do you really want to delete these records? This process cannot be undone.</p>
      </div>
      <div class="modal-footer justify-content-center">
        <button type="button" class="btn btn-secondary" (click)="closeModal()">Cancel</button>
        <button type="button" class="btn btn-danger" (click)="deleteData()">Delete</button>
      </div>
    </div>
  </div>
</ng-template>


